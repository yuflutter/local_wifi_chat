# Отладка проблемы с аудио-трансляцией

## Проблема
Аудиочанки успешно отправлялись на бекенд, но не приходили обратно к другим участникам.

## Возможные причины
1. **Проблема с определением участника**: Бекенд может не определять отправителя аудио
2. **Проблема с форматом ID**: UserHash может содержать пробелы или некорректные символы
3. **Проблема с порядком сообщений**: Аудио может приходить до metadata сообщения о присоединении

## Добавленная отладка

### Бекенд (`backend_mock/main.go`):
- Логирование всех бинарных сообщений
- Извлечение и проверка ID отправителя из аудиоданных
- Показ первых байт сообщения в hex формате
- Fallback для определения отправителя по данным

### Фронтенд (`lib/features/AUDIO_ROOM/services/socket_service.dart`):
- Подробное логирование отправки аудио (размеры, ID)
- Детальная обработка входящих аудиочанков
- Проверка участников при получении аудио

## Тестирование
1. Запустите `./test_audio_fix.sh`
2. Подключите 2+ участников
3. Проверьте логи на предмет:
   - "Sending audio: userHash=..." (фронтенд)
   - "Received binary message, size: X bytes" (бекенд)
   - "Broadcasting audio from X to Y participants" (бекенд)
   - "Processing audio chunk: X bytes" (фронтенд получателя)